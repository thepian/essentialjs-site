---
layout: frontpage
rooturi: http://essentialjs.com
---
<style>
blockquote.comment {
  position:absolute;
  right:0;
  width: 40%;
  font-size:1.1em;
}
section.hello pre {
  width: 50%;
}
</style>

<section class="hello">

  <h2>Features</h2>
  <ul>
  <li><a href="#pre-init">Initialise generated object with arguments</a></li>
  <li><a href="#variant">Using a specialised object only knowing the base constructor</a></li>
  <li><a href="#variant">Using a concrete variant of a base constructor without knowing which</a></li>
  <li><a href="#restricting">Generating an object not knowing that it is a singleton</a></li>
  <li><a href="#namespaces">Non-Global-Object and Private namespaces</a></li>
  </ul>

  <h2>Using</h2>
  <blockquote class="comment">
      Fetch the previously defined Rectangle and Circle <a href="#variant">generator variant</a> of 
      the <a href="#concrete">concrete generator</a> for Shape, 
      and make a new object.
      You can use an <a href="#namespaces">Alternate or Private Namespace</a> by passing
      a namespace in the Resolver() call.
  </blockquote>
  <pre>
var Shape = Resolver()("shapes.Shape");
var Rectangle = Shape.variant("rectangle");
var fivefive = Rectangle(5,5,{fill:"color1"});
var Circle = Shape.variant("circle");
var eight = Circle(8, {stroke:"recessed"});
  </pre>

<h2>Declaring</h2>
<blockquote class="comment">To declare the Rectangle and Shape constructors you would do something like
# needed for resolving the concrete constructor
# needed for resolving the Rectangle variant of Shape

</blockquote>
<pre>
function Shape(options) {}
Shape.arguments = {
  "options":ObjectType({preset:true})      
};
Resolver().set("shapes.Shape", Generator(Shape));

function Rectangle(width,height,options) {}
Rectangle.arguments = {
  "width": NumberType({preset:true}),
  "height": NumberType({preset:true}),
  "options":ObjectType({})
};
Resolver().set("shapes.Rectangle", Generator(Rectangle));  
Generator(Shape).variant("rectangle",Rectangle);  
    
function Circle(diameter,options) {}
Circle.arguments = {
  "diameter": NumberType({preset:true}),
  "options":ObjectType({})
};
Resolver().set("shapes.Circle", Generator(Circle));  
Generator(Shape).variant("circle",Circle);  
    
</pre>

<h2>Configuring Variants</h2>
<p>Variants can be configured separately. This allows you to change the behaviour of your web app without changing
the program code. You can try out a better version of Rectangle without changing the existing implementation.
</p>
<section>
<h2>Why?</h2>
<p>
The simplest way of sharing information in a JavaScript application is to create a global object.
This creates the problem of picking a name for your global variable that others won't reuse by mistake.
For more have a look at [[Namespaces and Globals]].
</p>
<p>
A common pattern is to reuse a previous object or create a new one if it wasn't used before.
[[Constructing Objects with Generators]] subtly moved the decision of whether to create a new instance from
the caller to a middleman. You go from `new Rectange(5,5)` to `Generator(Rectangle)(5,5)`.
[[Restricting Object Generation]] allows you to use previously constructed instances rather than creating a `new`.
</p>
<p>
When you make an application using typical Java paradigms you will quickly be adding singleton classes.
And you will just as quickly see why many people say that "singletons are evil".
The problem with singletons is not the concept of sharing a single instance among dependents, rather it is
the way the single instance is enforced and the resolution of it. 
In languages like Java solutions exist under the term [Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection).
Since [[JavaScript is a very different language]], it can be done in a fairly simple way using 
[[Restricting Object Generation]] and [[Generator Argument Injection]].
</p>
<p>
You commonly want to make a particular variant of something. So you know that you want a shape, and the design
might say that it is supposed to be a rectangle, but that might be configurable or persisted in a design document.
So you want a concrete instance of a shape constructor. The simple solution is [[Generating a Variant]].
Occasionally you don't want to a particular variant, but rather use the default one, and allow configurations
to determine which constructor to use. [Generating a Default Variant](Generating a Variant).
</p>
</section>

<section id="namespaces">
<h2>Namespaces and Globals</h2>

<p>When your page needs more than a couple of common variables and functions, you need a way to divide them into packages.
In JavaScript that is easy. Just create a few objects and divide your code between them.
</p>
<pre>
    var shapes = {};
    shapes.Shape = function() {};

    var tools = {};
    tools.Tool = function() {};
</pre>

<p>This works well for websites with a moderate amount of code. Eventually you will want a simple way to specify a 
hierachialy named package supported natively by most modern languages.
This classic functionality packaging can be done easily with a window resolver.
</p>
<pre>
    var shapes = Resolver(window)("my.shapes");
    var tools = Resolver(window)("my.tools");
</pre>

<p>If you call `Resolver()` without a parameter, the default behaviour is the look up the package within the default namespace object. This is called the **default namespace**.
Undefined parts are stubbed out with plain objects. This is usually what you want to do for the package, but not for the functionality within the package.
You can assign an entry in a package using a single statement.
</p>
<pre>
    Resolver().set("my.shapes.IGNORE_X",5);
</pre>
<p>If you want to declare a value without overwriting a previous one set elsewhere or configured, call `declare`.
</p>
<pre>
    Resolver().declare("my.shapes.IGNORE_X",5);
</pre>

<a href="https://github.com/essentialjs/EssentialJS/wiki/Namespaces-and-Globals">More about Namespaces and Globals</a>

</section>

<section id="preset">
<h2>Generating Pre-Initialised Object</h2>
      <p>By default a generated object starts out blank before the constructors are called. You can fill in member variables with argument values. This will seed the members before the base constructors are called.</p>

<pre><code>function Rectangle(width,height) {}
Rectangle.arguments = [
    NumberType({ name:"width", preset:true }),
    NumberType({ name:"height", preset:"height" })
]
</code></pre>

<p>If an argument is configured with a <code>preset</code> attribute the argument will be used to assign the member variable
before the constructors are called. A name can be specified or true for the argument name.</p>

<a href="https://github.com/essentialjs/EssentialJS/wiki/Generating-Pre-Initialised-Object">More about Generating Pre-Initialised Object</a>
</section>

